define(["controllers/controllers","config"],function(e,t){e.controller("manager",["$rootScope","$scope","$modal","Core",function(e,t,n,r){e.fixStyles(),t.connection={label:"",contactInfo:"",contactInfoTag:"Phone"},t.verified={status:!1,result:null},t.connections={local:function(){return r.connections.local()},list:function(){e.statusBar.display("Getting the list of connected numbers.."),r.connections.list().then(function(){e.statusBar.off(),r.factory.process()})},save:function(){if(t.connection.label!==""||t.connection.contactInfo!==""){var n=this;e.statusBar.display("Saving the number.."),r.connections.save(t.connection).then(function(){e.statusBar.off(),t.connection={label:"",contactInfo:"",contactInfoTag:"Phone"},n.list()})}},remove:function(t){var n=this;e.statusBar.display("Deleting a number.."),r.connections.remove(t).then(function(){e.statusBar.off(),n.list()})},edit:function(n){angular.forEach(e.data.connections,function(e){n.id===e.id&&(t.connection=e)})},verify:{initiate:function(i){e.statusBar.display("Verification call inited or message is being sent.."),r.connections.verify.initiate(i).then(function(r){console.log("result ->",r),e.statusBar.off(),t.toBeVerified=i,t.verificationInfoID=r.verificationInfo.id,n({template:"/js/views/elements/con_verification.html",persist:!0,show:!0,backdrop:"static",scope:t})})},confirm:function(n,i){e.statusBar.display("Verifying your number and code.."),r.connections.verify.confirm(n,i).then(function(n){e.statusBar.off(),t.verified={status:!0,result:n.verified},r.factory.process(),e.$emit("setView","manager")})}}}}])});