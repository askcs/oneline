define(["controllers/controllers"],function(e){e.controller("profile",["$rootScope","$scope","$location","Core","Storage",function(e,t,n,r,i){e.fixStyles(),t.profile={data:{},process:function(n){var s={};t.profile.data.name!==""&&(s.name={contactInfo:t.profile.data.name,contactInfoTag:"NAME",groupKeys:[e.data.contact.group.id]}),t.profile.data.email!==""&&(s.email={contactInfo:t.profile.data.email,contactInfoTag:"EMAIL",groupKeys:[e.data.contact.group.id]}),t.profile.data.address!==""&&(s.address={contactInfo:t.profile.data.address,contactInfoTag:"ADDRESS",groupKeys:[e.data.contact.group.id]}),t.profile.data.phone!==""&&(s.phone={contactInfo:t.profile.data.phone,contactInfoTag:"PHONE",groupKeys:[e.data.contact.group.id]}),angular.forEach(angular.fromJson(i.get("connections")),function(n){if(n.groupKeys[0]===e.data.contact.group.id)switch(n.contactInfoTag.toString().toUpperCase()){case"NAME":n.contactInfo=t.profile.data.name,s.name=n;break;case"EMAIL":n.contactInfo=t.profile.data.email,s.email=n;break;case"ADDRESS":n.contactInfo=t.profile.data.address,s.address=n;break;case"PHONE":n.contactInfo=t.profile.data.phone,s.phone=n}});var o=[];angular.forEach(s,function(e){o.push(e)}),r.connections.profiler(o).then(function(e){console.log("returned result ->",e),r.factory.process(),n()})},edit:function(){console.log("editing profile"),e.profileEditing=!0,$("#modal-profile-btn-save").text("Saving..").attr("disabled","disabled"),this.process(function(){$("#modal-profile-btn-save").text("Save").removeAttr("disabled"),e.profileEditing=!1,e.profileEdited={status:!0,result:!0}})}},n.path()!=="/login"&&(t.profile.data=e.data.account)}])});