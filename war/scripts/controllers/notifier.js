define(["controllers/controllers","config"],function(e,t){e.controller("notifier",["$rootScope","$scope","Core",function(e,t,n){e.fixStyles(),t.settings={local:function(){t.notificationSettings=n.settings.local()},list:function(){e.statusBar.display("Getting notifications information.."),n.settings.list().then(function(){e.statusBar.off(),n.factory.process()})},get:function(t){return e.data.settings[t].original},process:function(e){console.log("changing these settings ->",e),e.removed.length>0&&console.log("there are some removals")},update:function(t,r){console.log("updating for ->",t,r),e.statusBar.display("Getting notifications information.."),n.settings.list().then(function(){e.statusBar.off(),this.local()})},remove:function(e){console.log("deleting for ->",e)},add:function(e,t){console.log("creating for ->",e,t)},exists:function(e){var n=!1;return angular.forEach(t.notificationSettings,function(t){t.medium===e&&(n=!0)}),n},save:function(){var t=this,r={changed:{sms:{status:!1},email:{status:!1}},added:{sms:{status:!1},email:{status:!1}},removed:{sms:!1,email:!1}},i={sms:[],email:[]};e.data.settings.sms.status?e.data.settings.sms.target!==this.get("sms")?(i.sms.push(e.data.settings.sms.target),r.changed.sms={status:!0,value:i.sms}):(i.sms.push(e.data.settings.sms.target),r.added.sms={status:!0,value:i.sms}):r.removed.sms=!0,e.data.settings.email.status?e.data.settings.email.target!==this.get("email")?(i.email.push(e.data.settings.email.target),r.changed.email={status:!0,value:i.email}):(i.email.push(e.data.settings.email.target),r.added.email={status:!0,value:i.email}):r.removed.email=!0,e.statusBar.display("Changing notifications settings.."),n.settings.save(r).then(function(){t.list()})}},t.settings.local()}])});